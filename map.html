<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Tabbed Maps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    .tab-button {
      padding: 10px 20px;
      cursor: pointer;
      border: none;
      border-bottom: 3px solid transparent;
      background-color: lightgray;
      margin-right: 2px;
    }
    .tab-button.active {
      background-color: gray;
      border-bottom: 3px solid black;
    }
    .map-container {
      width: 100%;
      height: 500px;
      display: none;
    }
    .map-container.active {
      display: block;
    }
    .circle-label {
      font-weight: bold;
      color: white;
      text-shadow: 0 0 3px black;
    }
    #zoom-warning {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(50, 50, 50, 0.85);
      color: white;
      font-size: 24px;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <div>
    <button class="tab-button active" onclick="showMap(0)">The Bull</button>
    <button class="tab-button" onclick="showMap(1)">BobFM</button>
    <button class="tab-button" onclick="showMap(2)">Cities</button>
    <button class="tab-button" onclick="showMap(3)">Magic</button>
    <button class="tab-button" onclick="showMap(4)">All Stations</button>
  </div>
  <div id="map0" class="map-container active"></div>
  <div id="map1" class="map-container"></div>
  <div id="map2" class="map-container"></div>
  <div id="map3" class="map-container"></div>
  <div id="map4" class="map-container"></div>

  <div id="zoom-warning">Hold <strong>Ctrl</strong> or <strong>Alt</strong> and scroll to zoom the map.</div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const mapConfigs = [
      {
        center: [40.4689, -88.9561],
        color: '#FF6900',
        ranges: [
          { m: 19200, o: 0.1 },
          { m: 11265, o: 0.2 },
          { m: 3218, o: 0.4 }
        ],
        tooltip: 'The Bull',
        url: 'https://thebullcentralillinois.com/'
      },
      {
        center: [40.5155, -89.0027],
        color: '#EF3224',
        ranges: [
          { m: 19200, o: 0.1 },
          { m: 11265, o: 0.2 },
          { m: 3218, o: 0.4 }
        ],
        tooltip: '97.9 BobFM',
        url: 'https://979bobfm.com/'
      },
      {
        center: [40.4841, -88.9937],
        color: '#007BC3',
        ranges: [
          { m: 19200, o: 0.1 },
          { m: 11265, o: 0.2 },
          { m: 3218, o: 0.4 }
        ],
        tooltip: 'Cities 92.9',
        url: 'https://cities929.com/'
      },
      {
        center: [40.4832, -88.9937],
        color: '#913750',
        ranges: [
          { m: 19200, o: 0.1 },
          { m: 11265, o: 0.2 },
          { m: 3218, o: 0.4 }
        ],
        tooltip: 'Magic 99.5',
        url: 'https://magic995blm.com/'
      }
    ];

    const maps = [];

    function preventScrollZoom(map) {
      const container = map.getContainer();
      container.addEventListener('wheel', function (e) {
        if (!e.ctrlKey && !e.altKey) {
          e.preventDefault();
          showZoomWarning();
        } else {
          hideZoomWarning();
          map.scrollWheelZoom.enable();
        }
      }, { passive: false });
    }

    function showZoomWarning() {
      const overlay = document.getElementById('zoom-warning');
      overlay.style.display = 'flex';
      clearTimeout(overlay._hideTimeout);
      overlay._hideTimeout = setTimeout(() => {
        overlay.style.display = 'none';
      }, 2000);
    }

    function hideZoomWarning() {
      document.getElementById('zoom-warning').style.display = 'none';
    }

    function showMap(index) {
      document.querySelectorAll('.map-container').forEach((el, i) => {
        el.classList.toggle('active', i === index);
      });
      document.querySelectorAll('.tab-button').forEach((btn, i) => {
        btn.classList.toggle('active', i === index);
      });
    }

    mapConfigs.forEach((cfg, i) => {
      const map = L.map(`map${i}`, {
        scrollWheelZoom: false
      }).setView(cfg.center, 10);
      preventScrollZoom(map);

      const maxRadius = Math.max(...cfg.ranges.map(r => r.m));

      cfg.ranges.forEach(r => {
        const circle = L.circle(cfg.center, {
          radius: r.m,
          fillColor: cfg.color,
          fillOpacity: r.o,
          stroke: false,
          interactive: true
        }).addTo(map);

        if (r.m !== maxRadius) {
          circle.bindTooltip(`<a href="${cfg.url}" target="_blank" style="color:white;text-decoration:underline">${cfg.tooltip}</a>`, {
            permanent: true,
            direction: 'center',
            className: 'circle-label'
          });
        }
      });

      maps.push(map);
    });

    function createAllStationsMap() {
      const allMap = L.map('map4', {
        scrollWheelZoom: false
      }).setView([40.48, -88.99], 9);
      preventScrollZoom(allMap);

      mapConfigs.forEach(cfg => {
        cfg.ranges.forEach(r => {
          L.circle(cfg.center, {
            radius: r.m,
            fillColor: cfg.color,
            fillOpacity: r.o,
            stroke: false
          }).addTo(allMap);
        });
      });

      maps.push(allMap);
    }

    createAllStationsMap();
  </script>
</body>
</html>

